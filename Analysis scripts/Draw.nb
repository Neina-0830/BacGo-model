(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.4' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     12925,        286]
NotebookOptionsPosition[     12270,        265]
NotebookOutlinePosition[     12625,        281]
CellTagsIndexPosition[     12582,        278]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData["   "], "Input",
 CellChangeTimes->{{3.8124032848689203`*^9, 3.812403285415696*^9}},
 CellLabel->"In[31]:=",ExpressionUUID->"b67277f0-45f6-4b13-82a0-453023876bdf"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"lenGrid", "=", "20"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"backColor", "=", 
   RowBox[{"Lighter", "[", "LightGray", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imageSize", "=", "400"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"frameSize", "=", "20"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"frameOpen", "=", "True"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"INDEX1", "=", 
    RowBox[{"{", 
     RowBox[{"Purple", ",", "Orange", ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{"1", ",", "0", ",", "0"}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{"0", ",", "1", ",", "0"}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{"1", ",", "1", ",", "1"}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{
        RowBox[{"170", "/", "255"}], ",", 
        RowBox[{"85", "/", "255"}], ",", "0"}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{"1", ",", "0", ",", "1"}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{
        RowBox[{"104", "/", "255"}], ",", 
        RowBox[{"51", "/", "255"}], ",", 
        RowBox[{"51", "/", "255"}]}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{"1", ",", 
        RowBox[{"138", "/", "255"}], ",", 
        RowBox[{"21", "/", "255"}]}], "]"}], ",", 
      RowBox[{"RGBColor", "[", 
       RowBox[{
        RowBox[{"64", "/", "255"}], ",", "0", ",", "0.5"}], "]"}], ",", "Red",
       ",", "Green", ",", 
      RowBox[{"Darker", "[", "Yellow", "]"}], ",", "Orange", ",", "Blue", ",",
       "Gray", ",", "Black"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"SetDirectory", "[", 
     RowBox[{"FileNameJoin", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", "\"\<run-1\>\""}], 
       "}"}], "]"}], "]"}], ";"}], "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"dirs", "=", 
   RowBox[{"FileNames", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Do", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{
     RowBox[{"timg", "=", 
      RowBox[{"ToExpression", "@", 
       RowBox[{"ImportString", "@", 
        RowBox[{"ToString", "@", 
         RowBox[{"{", 
          RowBox[{"StringReplace", "[", 
           RowBox[{
            RowBox[{"Import", "[", 
             RowBox[{"FileNameJoin", "[", 
              RowBox[{"{", 
               RowBox[{
                RowBox[{"NotebookDirectory", "[", "]"}], ",", 
                "\"\<result\>\"", ",", "\"\<data\>\"", ",", 
                RowBox[{"\"\<Cells-\>\"", "<>", 
                 RowBox[{"ToString", "@", "i"}], "<>", "\"\<.txt\>\""}]}], 
               "}"}], "]"}], "]"}], ",", 
            RowBox[{"\"\<}{\>\"", "\[Rule]", "\"\<},{\>\""}]}], "]"}], 
          "}"}]}]}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"lenFun", "=", 
      RowBox[{"Length", "@", 
       RowBox[{"timg", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"pos", "=", 
      RowBox[{"Flatten", "@", 
       RowBox[{"Take", "[", 
        RowBox[{"timg", ",", "All", ",", 
         RowBox[{"{", "1", "}"}]}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"funs", "=", 
      RowBox[{"Flatten", "@", 
       RowBox[{"Take", "[", 
        RowBox[{"timg", ",", "All", ",", 
         RowBox[{"{", "3", "}"}]}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"t2", "=", 
      RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Do", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"temp", "=", 
         RowBox[{"funs", "[", 
          RowBox[{"[", "j", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
        RowBox[{"t1", "=", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"timg", "[", 
              RowBox[{"[", "j", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}], "\[Equal]", "0"}], ",", 
           "backColor", ",", 
           RowBox[{"INDEX1", "[", 
            RowBox[{"[", "temp", "]"}], "]"}]}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"t2", "=", 
         RowBox[{"Join", "[", 
          RowBox[{"t2", ",", 
           RowBox[{"{", "t1", "}"}]}], "]"}]}], ";"}], "\[IndentingNewLine]", 
       ",", 
       RowBox[{"{", 
        RowBox[{"j", ",", 
         RowBox[{"Length", "@", "timg"}]}], "}"}]}], "]"}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"imgout", "=", 
      RowBox[{"MatrixPlot", "[", 
       RowBox[{
        RowBox[{"Partition", "[", 
         RowBox[{"t2", ",", "lenGrid"}], "]"}], ",", 
        RowBox[{"ImageSize", "\[Rule]", "imageSize"}], ",", 
        RowBox[{"Frame", "\[Rule]", "frameOpen"}], ",", 
        RowBox[{"FrameStyle", "\[Rule]", 
         RowBox[{"Directive", "[", 
          RowBox[{"Thick", ",", 
           RowBox[{"FontSize", "\[Rule]", "20"}], ",", "Bold"}], "]"}]}]}], 
       "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Export", "[", 
      RowBox[{
       RowBox[{"FileNameJoin", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"NotebookDirectory", "[", "]"}], ",", "\"\<result\>\"", 
          ",", "\"\<result-3\>\"", ",", 
          RowBox[{"\"\<Cells-\>\"", "<>", 
           RowBox[{"ToString", "@", "i"}], "<>", "\"\<.tif\>\""}]}], "}"}], 
        "]"}], ",", "imgout"}], "]"}], ";"}], "\[IndentingNewLine]", ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", "0", ",", "500", ",", "7"}], "}"}]}], "]"}], 
  ";"}]}], "Input",
 CellChangeTimes->{{3.7379275125147867`*^9, 3.737927540923412*^9}, {
   3.7379275859099846`*^9, 3.7379276044210434`*^9}, {3.7379277283011293`*^9, 
   3.7379278037314434`*^9}, {3.737927865860997*^9, 3.7379278665380363`*^9}, {
   3.737928418470605*^9, 3.7379285113379164`*^9}, {3.7379292141251135`*^9, 
   3.7379292950307407`*^9}, {3.748132609552101*^9, 3.748132611065056*^9}, {
   3.7481326428331203`*^9, 3.7481326453892865`*^9}, {3.748132753350687*^9, 
   3.74813277175546*^9}, {3.748137284539361*^9, 3.748137296788617*^9}, 
   3.748137634080823*^9, {3.7481377651988072`*^9, 3.74813779473979*^9}, {
   3.748138081839327*^9, 3.748138087286762*^9}, {3.7481381563980355`*^9, 
   3.748138163792262*^9}, {3.7487666254044666`*^9, 3.7487666463933835`*^9}, {
   3.748766680269758*^9, 3.748766686121111*^9}, {3.7487667635012455`*^9, 
   3.748766789348135*^9}, {3.74876685580538*^9, 3.7487668789474983`*^9}, {
   3.7487671886227503`*^9, 3.7487671961685767`*^9}, {3.7487672450258837`*^9, 
   3.7487672527363143`*^9}, {3.748769369336159*^9, 3.7487693795887475`*^9}, {
   3.748769413654653*^9, 3.7487694210129766`*^9}, {3.748770369660307*^9, 
   3.748770407793343*^9}, {3.748770543075629*^9, 3.748770549465558*^9}, {
   3.7487744933359137`*^9, 3.748774502973171*^9}, {3.748774591115572*^9, 
   3.7487745942211747`*^9}, {3.748775562639538*^9, 3.748775571529738*^9}, {
   3.7487756645166655`*^9, 3.7487756678907576`*^9}, {3.7487757583891945`*^9, 
   3.748775771905877*^9}, {3.7487760035339365`*^9, 3.7487760154431252`*^9}, {
   3.748776117936371*^9, 3.7487761222496295`*^9}, {3.7487764723579426`*^9, 
   3.748776480577962*^9}, {3.748832925145298*^9, 3.7488329328447084`*^9}, {
   3.748833465707033*^9, 3.7488334694590006`*^9}, {3.7488337418005776`*^9, 
   3.7488337455884085`*^9}, {3.748834086950283*^9, 3.748834089391754*^9}, {
   3.7488341295892735`*^9, 3.748834135263092*^9}, {3.749252777097372*^9, 
   3.7492528066773815`*^9}, {3.749259711444528*^9, 3.7492597136834908`*^9}, {
   3.749259790219003*^9, 3.7492597940037456`*^9}, {3.7492598707747116`*^9, 
   3.7492598808734894`*^9}, {3.752537230220972*^9, 3.7525372603692684`*^9}, {
   3.752537291939496*^9, 3.7525373356135273`*^9}, {3.7525374265002565`*^9, 
   3.7525374328198366`*^9}, {3.7525377830882716`*^9, 
   3.7525378285349274`*^9}, {3.7525388998805857`*^9, 3.75253890434059*^9}, {
   3.7525433163493395`*^9, 3.7525433168061075`*^9}, {3.752543350259935*^9, 
   3.7525433547479353`*^9}, {3.752543447952735*^9, 3.7525434564719253`*^9}, {
   3.7525445630683804`*^9, 3.7525445752598095`*^9}, {3.812403337444883*^9, 
   3.812403350176694*^9}, {3.812403435422343*^9, 3.8124034670711713`*^9}, {
   3.8124035506393967`*^9, 3.812403554372858*^9}, {3.81240375718423*^9, 
   3.8124037791322155`*^9}, {3.8124038152491665`*^9, 
   3.8124038233718386`*^9}, {3.812403948798077*^9, 3.8124039698613987`*^9}, {
   3.8124040052749386`*^9, 3.812404014913302*^9}, {3.812404432231162*^9, 
   3.8124044384801207`*^9}, 3.81240451027196*^9, {3.8124047164245453`*^9, 
   3.8124047281783314`*^9}, {3.812404761312403*^9, 3.812404788282857*^9}, {
   3.812404854449725*^9, 3.812404931580542*^9}, {3.812404988207706*^9, 
   3.8124049923942223`*^9}, {3.8124051184882584`*^9, 3.812405122549406*^9}, {
   3.8124051601364117`*^9, 3.8124051640113935`*^9}, {3.812405552845562*^9, 
   3.8124055565798197`*^9}, {3.8124067144423532`*^9, 
   3.8124067190860505`*^9}, {3.8124068029252033`*^9, 3.812406807611576*^9}, {
   3.8124074189883475`*^9, 3.812407423815342*^9}, {3.812407506003801*^9, 
   3.812407511596241*^9}, {3.8124139082071733`*^9, 3.81241391230352*^9}, {
   3.8124143083303294`*^9, 3.81241431010095*^9}, {3.812445666007392*^9, 
   3.8124456708130674`*^9}, 3.8124457063608384`*^9, 3.812445768295889*^9, {
   3.812499989587221*^9, 3.812499993594507*^9}, {3.812500054797614*^9, 
   3.8125000592496643`*^9}, {3.8125001040339327`*^9, 3.812500110574444*^9}, {
   3.812500880374608*^9, 3.8125008843400073`*^9}, {3.8125013222658424`*^9, 
   3.8125013263618565`*^9}, {3.812501540181859*^9, 3.812501544400547*^9}, {
   3.8125017178947477`*^9, 3.8125017229661503`*^9}, {3.8125042134548454`*^9, 
   3.812504217487013*^9}, {3.8125042780443563`*^9, 3.812504285011729*^9}, {
   3.812504331152791*^9, 3.812504333055665*^9}, {3.8125043653829184`*^9, 
   3.8125043697621975`*^9}, {3.812504705042697*^9, 3.8125047747159147`*^9}, {
   3.812505129397957*^9, 3.812505134239015*^9}, {3.812505419870596*^9, 
   3.8125054236135397`*^9}, {3.8125056522020516`*^9, 3.812505763182644*^9}, {
   3.8125058224183283`*^9, 3.8125058252357445`*^9}, {3.8125058884136467`*^9, 
   3.812505893861085*^9}, {3.8125060059078074`*^9, 3.8125060111128874`*^9}, {
   3.8125070483707*^9, 3.8125071038254423`*^9}, {3.812507169787123*^9, 
   3.812507174260171*^9}, {3.8125338066280575`*^9, 3.812533820282583*^9}, {
   3.8125340466131706`*^9, 3.8125340697303286`*^9}, {3.8125341652559423`*^9, 
   3.8125342517182894`*^9}, {3.8125342945155706`*^9, 
   3.8125343563018913`*^9}, {3.812534396030265*^9, 3.8125343984547834`*^9}, {
   3.8125344314665623`*^9, 3.812534452196163*^9}, {3.812535385052844*^9, 
   3.8125353991436605`*^9}, {3.812536040243595*^9, 3.812536044845278*^9}, {
   3.812536105294857*^9, 3.812536111633915*^9}, {3.8125361601688876`*^9, 
   3.8125361726393194`*^9}, {3.812536322687131*^9, 3.812536328924142*^9}, {
   3.822909647741041*^9, 
   3.822909648913113*^9}},ExpressionUUID->"7e0eac94-4063-4fc4-a340-\
aa87ffc3ed4c"],

Cell[CellGroupData[{

Cell[BoxData[""], "Print",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.7487666958999634`*^9, {3.748766791810501*^9, 3.748766798593363*^9}, 
   3.748767201772541*^9},ExpressionUUID->"9da3c07b-5f4d-480d-be13-\
5ceda2b0e2f4"],

Cell[BoxData[""], "Print",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{3.7487666958999634`*^9, 
  3.748766791810501*^9},ExpressionUUID->"766a1271-e0df-4d96-8c0d-\
804e0a4a4de8"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1520, 781},
WindowMargins->{{-8, Automatic}, {Automatic, 0}},
FrontEndVersion->"12.0 for Microsoft Windows (64-bit) (2019\:5e744\:67088\
\:65e5)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 176, 2, 28, "Input",ExpressionUUID->"b67277f0-45f6-4b13-82a0-453023876bdf"],
Cell[CellGroupData[{
Cell[759, 26, 11001, 218, 791, "Input",ExpressionUUID->"7e0eac94-4063-4fc4-a340-aa87ffc3ed4c"],
Cell[CellGroupData[{
Cell[11785, 248, 252, 6, 22, "Print",ExpressionUUID->"9da3c07b-5f4d-480d-be13-5ceda2b0e2f4"],
Cell[12040, 256, 202, 5, 22, "Print",ExpressionUUID->"766a1271-e0df-4d96-8c0d-804e0a4a4de8"]
}, Open  ]]
}, Open  ]]
}
]
*)

